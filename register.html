<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ÄÄƒng kÃ½ há»c sinh</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <header>
    <h1>ğŸ“ ÄÄƒng kÃ½ há»c sinh</h1>
    <a href="index.html">Äiá»ƒm danh</a>
    <a href="teacher-login.html">ÄÄƒng nháº­p giÃ¡o viÃªn</a>
  </header>

  <div class="card">
    <h2>Chá»n trÆ°á»ng & lá»›p</h2>
    <label>TrÆ°á»ng</label>
    <select id="schoolSelect">
      <option value="">-- Chá»n trÆ°á»ng --</option>
    </select>
    <label>Lá»›p</label>
    <select id="classSelect">
      <option value="">-- Chá»n lá»›p --</option>
    </select>
  </div>

  <div class="card">
    <h2>ThÃ´ng tin cÃ¡ nhÃ¢n</h2>
    <label>MÃ£ sá»‘ sinh viÃªn (MSSV)</label>
    <input type="text" id="studentCode" placeholder="MSSV - unique trong lá»›p">
    <label>Há» tÃªn</label>
    <input type="text" id="studentName" placeholder="Há» tÃªn Ä‘áº§y Ä‘á»§">
  </div>

  <div class="card">
    <h2>Chá»¥p khuÃ´n máº·t</h2>
    <p>áº¢nh sáº½ dÃ¹ng Ä‘á»ƒ nháº­n diá»‡n khi Ä‘iá»ƒm danh. Chá»‰ lÆ°u embedding, khÃ´ng lÆ°u áº£nh.</p>
    <button id="startCameraBtn">Má»Ÿ camera</button>
  </div>

  <div id="cameraSection" class="card hidden">
    <div class="video-container">
      <video id="videoEl" width="480" height="360" autoplay playsinline></video>
    </div>
    <canvas id="faceCanvas"></canvas>
    <button id="captureBtn">Chá»¥p & ÄÄƒng kÃ½</button>
  </div>

  <div id="registerResult"></div>

  <script type="module">
    try {
      const { initRegisterPage } = await import("./js/register.js");
      if (document.readyState === "loading") {
        document.addEventListener("DOMContentLoaded", () => initRegisterPage());
      } else {
        initRegisterPage();
      }
    } catch (e) {
      document.getElementById("registerResult").innerHTML =
        '<p style="color:red">Lá»—i: ' + e.message + '. Cháº¡y qua server (host.bat).</p>';
    }
  </script>
  <style>
    .hidden { display: none !important; }
  </style>
</body>
</html>
